#
# Scenario 1:
# Create a small table with row_format compressed and adding/dropping instant column should fail
#
CREATE TABLE t1 (a INT, b INT) ROW_FORMAT=COMPRESSED;
INSERT INTO t1 VALUES(1, 1), (2, 2), (3, 3), (4, 4), (5, 5);
ALTER TABLE t1 ADD COLUMN c1 INT DEFAULT 5, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 DROP COLUMN a, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
DROP TABLE t1;
#
# Scenario 2:
# Create a small table and adding spatial types with not null should fail
#
CREATE TABLE t1 (a INT, b INT);
INSERT INTO t1 VALUES(1, 1), (2, 2), (3, 3), (4, 4), (5, 5);
ALTER TABLE t1 ADD COLUMN c1 POINT NOT NULL, ALGORITHM = INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 ADD COLUMN d1 LINESTRING  NOT NULL, ALGORITHM = INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 ADD COLUMN e1 POLYGON  NOT NULL, ALGORITHM = INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 ADD COLUMN f1 MULTIPOINT  NOT NULL, ALGORITHM = INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 ADD COLUMN g1 MULTILINESTRING  NOT NULL, ALGORITHM = INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 ADD COLUMN h1 MULTIPOLYGON  NOT NULL, ALGORITHM = INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 ADD COLUMN i1 GEOMETRYCOLLECTION  NOT NULL, ALGORITHM = INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 ADD COLUMN j1 GEOMETRY  NOT NULL, ALGORITHM = INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
DROP TABLE t1;
#
# Scenario 3:
# Create a temporary table and adding/dropping instant column should fail
#
CREATE TEMPORARY TABLE tmp1(a INT, b INT);
ALTER TABLE tmp1 ADD COLUMN c int, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY.
ALTER TABLE tmp1 DROP COLUMN b, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY.
DROP TABLE tmp1;
#
# Scenario 4:
# Trying to add/drop instant columns for data-dictionary tables should fail
#
ALTER TABLE mysql.plugin ADD COLUMN c1 INT, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE mysql.plugin DROP COLUMN dl, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE mysql.user ADD COLUMN c1 INT, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE mysql.user DROP COLUMN Select_priv, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
#
# Scenario 5:
# Trying to add/drop instant column to a table having FTS index
#
CREATE TABLE t1(a TEXT, b TEXT, FULLTEXT(a,b));
INSERT INTO t1 VALUES('test1', 'test2');
ALTER TABLE t1 ADD COLUMN c INT, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported. Reason: InnoDB presently supports one FULLTEXT index creation at a time. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 DROP COLUMN b, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported. Reason: InnoDB presently supports one FULLTEXT index creation at a time. Try ALGORITHM=COPY/INPLACE.
DROP TABLE t1;
#
# Scenario 6:
# INSTANT ADD/DROP column with key
#
CREATE TABLE t1 (c1 INT, c2 INT);
ALTER TABLE t1 ADD COLUMN c3 INT KEY, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
DROP TABLE t1;
CREATE TABLE t1 (c1 INT KEY, c2 INT);
ALTER TABLE t1 DROP COLUMN c1, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported. Reason: Dropping a primary key is not allowed without also adding a new primary key. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 DROP COLUMN c1, ADD PRIMARY KEY (c2), ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
DROP TABLE t1;
CREATE TABLE t1 (c1 INT KEY, c2 INT);
ALTER TABLE t1 ADD COLUMN c3 INT UNIQUE KEY, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
ALTER TABLE t1 ADD COLUMN c3 INT, ADD INDEX idx (c3), ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
DROP TABLE t1;
CREATE TABLE t1 (c1 INT KEY, c2 INT, INDEX idx(c2));
ALTER TABLE t1 DROP COLUMN c2, ALGORITHM=INSTANT;
ERROR 0A000: ALGORITHM=INSTANT is not supported for this operation. Try ALGORITHM=COPY/INPLACE.
DROP TABLE t1;
#
# Scenario 7:
# Maximum row versions (MAX_ROW_VERSION is 255)
#
CREATE TABLE t1 (c1 int);
# INSTANT ADD COLUMNS to table to make it reach the maximum versions
# Table TOTAL_ROW_VERSIONS should be 255 (MAX)
# Metadata from INFORMATION_SCHEMA.TABLES
NAME	N_COLS	INSTANT_COLS	TOTAL_ROW_VERSIONS
test/t1	259	0	255
# Metadata from INFORMATION_SCHEMA.COLUMNS
NAME	POS	MTYPE	PRTYPE	HAS_DEFAULT
c1	0	6	1027	0
c2	1	6	1027	1
c3	2	6	1027	1
c4	3	6	1027	1
c5	4	6	1027	1
c6	5	6	1027	1
c7	6	6	1027	1
c8	7	6	1027	1
c9	8	6	1027	1
c10	9	6	1027	1
c11	10	6	1027	1
c12	11	6	1027	1
c13	12	6	1027	1
c14	13	6	1027	1
c15	14	6	1027	1
c16	15	6	1027	1
c17	16	6	1027	1
c18	17	6	1027	1
c19	18	6	1027	1
c20	19	6	1027	1
c21	20	6	1027	1
c22	21	6	1027	1
c23	22	6	1027	1
c24	23	6	1027	1
c25	24	6	1027	1
c26	25	6	1027	1
c27	26	6	1027	1
c28	27	6	1027	1
c29	28	6	1027	1
c30	29	6	1027	1
c31	30	6	1027	1
c32	31	6	1027	1
c33	32	6	1027	1
c34	33	6	1027	1
c35	34	6	1027	1
c36	35	6	1027	1
c37	36	6	1027	1
c38	37	6	1027	1
c39	38	6	1027	1
c40	39	6	1027	1
c41	40	6	1027	1
c42	41	6	1027	1
c43	42	6	1027	1
c44	43	6	1027	1
c45	44	6	1027	1
c46	45	6	1027	1
c47	46	6	1027	1
c48	47	6	1027	1
c49	48	6	1027	1
c50	49	6	1027	1
c51	50	6	1027	1
c52	51	6	1027	1
c53	52	6	1027	1
c54	53	6	1027	1
c55	54	6	1027	1
c56	55	6	1027	1
c57	56	6	1027	1
c58	57	6	1027	1
c59	58	6	1027	1
c60	59	6	1027	1
c61	60	6	1027	1
c62	61	6	1027	1
c63	62	6	1027	1
c64	63	6	1027	1
c65	64	6	1027	1
c66	65	6	1027	1
c67	66	6	1027	1
c68	67	6	1027	1
c69	68	6	1027	1
c70	69	6	1027	1
c71	70	6	1027	1
c72	71	6	1027	1
c73	72	6	1027	1
c74	73	6	1027	1
c75	74	6	1027	1
c76	75	6	1027	1
c77	76	6	1027	1
c78	77	6	1027	1
c79	78	6	1027	1
c80	79	6	1027	1
c81	80	6	1027	1
c82	81	6	1027	1
c83	82	6	1027	1
c84	83	6	1027	1
c85	84	6	1027	1
c86	85	6	1027	1
c87	86	6	1027	1
c88	87	6	1027	1
c89	88	6	1027	1
c90	89	6	1027	1
c91	90	6	1027	1
c92	91	6	1027	1
c93	92	6	1027	1
c94	93	6	1027	1
c95	94	6	1027	1
c96	95	6	1027	1
c97	96	6	1027	1
c98	97	6	1027	1
c99	98	6	1027	1
c100	99	6	1027	1
c101	100	6	1027	1
c102	101	6	1027	1
c103	102	6	1027	1
c104	103	6	1027	1
c105	104	6	1027	1
c106	105	6	1027	1
c107	106	6	1027	1
c108	107	6	1027	1
c109	108	6	1027	1
c110	109	6	1027	1
c111	110	6	1027	1
c112	111	6	1027	1
c113	112	6	1027	1
c114	113	6	1027	1
c115	114	6	1027	1
c116	115	6	1027	1
c117	116	6	1027	1
c118	117	6	1027	1
c119	118	6	1027	1
c120	119	6	1027	1
c121	120	6	1027	1
c122	121	6	1027	1
c123	122	6	1027	1
c124	123	6	1027	1
c125	124	6	1027	1
c126	125	6	1027	1
c127	126	6	1027	1
c128	127	6	1027	1
c129	128	6	1027	1
c130	129	6	1027	1
c131	130	6	1027	1
c132	131	6	1027	1
c133	132	6	1027	1
c134	133	6	1027	1
c135	134	6	1027	1
c136	135	6	1027	1
c137	136	6	1027	1
c138	137	6	1027	1
c139	138	6	1027	1
c140	139	6	1027	1
c141	140	6	1027	1
c142	141	6	1027	1
c143	142	6	1027	1
c144	143	6	1027	1
c145	144	6	1027	1
c146	145	6	1027	1
c147	146	6	1027	1
c148	147	6	1027	1
c149	148	6	1027	1
c150	149	6	1027	1
c151	150	6	1027	1
c152	151	6	1027	1
c153	152	6	1027	1
c154	153	6	1027	1
c155	154	6	1027	1
c156	155	6	1027	1
c157	156	6	1027	1
c158	157	6	1027	1
c159	158	6	1027	1
c160	159	6	1027	1
c161	160	6	1027	1
c162	161	6	1027	1
c163	162	6	1027	1
c164	163	6	1027	1
c165	164	6	1027	1
c166	165	6	1027	1
c167	166	6	1027	1
c168	167	6	1027	1
c169	168	6	1027	1
c170	169	6	1027	1
c171	170	6	1027	1
c172	171	6	1027	1
c173	172	6	1027	1
c174	173	6	1027	1
c175	174	6	1027	1
c176	175	6	1027	1
c177	176	6	1027	1
c178	177	6	1027	1
c179	178	6	1027	1
c180	179	6	1027	1
c181	180	6	1027	1
c182	181	6	1027	1
c183	182	6	1027	1
c184	183	6	1027	1
c185	184	6	1027	1
c186	185	6	1027	1
c187	186	6	1027	1
c188	187	6	1027	1
c189	188	6	1027	1
c190	189	6	1027	1
c191	190	6	1027	1
c192	191	6	1027	1
c193	192	6	1027	1
c194	193	6	1027	1
c195	194	6	1027	1
c196	195	6	1027	1
c197	196	6	1027	1
c198	197	6	1027	1
c199	198	6	1027	1
c200	199	6	1027	1
c201	200	6	1027	1
c202	201	6	1027	1
c203	202	6	1027	1
c204	203	6	1027	1
c205	204	6	1027	1
c206	205	6	1027	1
c207	206	6	1027	1
c208	207	6	1027	1
c209	208	6	1027	1
c210	209	6	1027	1
c211	210	6	1027	1
c212	211	6	1027	1
c213	212	6	1027	1
c214	213	6	1027	1
c215	214	6	1027	1
c216	215	6	1027	1
c217	216	6	1027	1
c218	217	6	1027	1
c219	218	6	1027	1
c220	219	6	1027	1
c221	220	6	1027	1
c222	221	6	1027	1
c223	222	6	1027	1
c224	223	6	1027	1
c225	224	6	1027	1
c226	225	6	1027	1
c227	226	6	1027	1
c228	227	6	1027	1
c229	228	6	1027	1
c230	229	6	1027	1
c231	230	6	1027	1
c232	231	6	1027	1
c233	232	6	1027	1
c234	233	6	1027	1
c235	234	6	1027	1
c236	235	6	1027	1
c237	236	6	1027	1
c238	237	6	1027	1
c239	238	6	1027	1
c240	239	6	1027	1
c241	240	6	1027	1
c242	241	6	1027	1
c243	242	6	1027	1
c244	243	6	1027	1
c245	244	6	1027	1
c246	245	6	1027	1
c247	246	6	1027	1
c248	247	6	1027	1
c249	248	6	1027	1
c250	249	6	1027	1
c251	250	6	1027	1
c252	251	6	1027	1
c253	252	6	1027	1
c254	253	6	1027	1
c255	254	6	1027	1
c256	255	6	1027	1
CHECK TABLE t1 EXTENDED;
Table	Op	Msg_type	Msg_text
test.t1	check	status	OK
# An INSTANT ADD COLUMN should result in error now.
ALTER TABLE t1 ADD COLUMN c257 INT, ALGORITHM=INSTANT;
ERROR HY000: Maximum row versions reached for table test/t1. No more columns can be added or dropped instantly. Please use COPY/INPLACE.
# ADD COLUMN shall fall back to INPLACE if ALGORITHM not given explicitly
ALTER TABLE t1 ADD COLUMN c257 INT;
CHECK TABLE t1 EXTENDED;
Table	Op	Msg_type	Msg_text
test.t1	check	status	OK
# Table would have been rebuilt
# Metadata from INFORMATION_SCHEMA.TABLES
NAME	N_COLS	INSTANT_COLS	TOTAL_ROW_VERSIONS
test/t1	260	0	0
# Metadata from INFORMATION_SCHEMA.COLUMNS
NAME	POS	MTYPE	PRTYPE	HAS_DEFAULT
c1	0	6	1027	0
c2	1	6	1027	0
c3	2	6	1027	0
c4	3	6	1027	0
c5	4	6	1027	0
c6	5	6	1027	0
c7	6	6	1027	0
c8	7	6	1027	0
c9	8	6	1027	0
c10	9	6	1027	0
c11	10	6	1027	0
c12	11	6	1027	0
c13	12	6	1027	0
c14	13	6	1027	0
c15	14	6	1027	0
c16	15	6	1027	0
c17	16	6	1027	0
c18	17	6	1027	0
c19	18	6	1027	0
c20	19	6	1027	0
c21	20	6	1027	0
c22	21	6	1027	0
c23	22	6	1027	0
c24	23	6	1027	0
c25	24	6	1027	0
c26	25	6	1027	0
c27	26	6	1027	0
c28	27	6	1027	0
c29	28	6	1027	0
c30	29	6	1027	0
c31	30	6	1027	0
c32	31	6	1027	0
c33	32	6	1027	0
c34	33	6	1027	0
c35	34	6	1027	0
c36	35	6	1027	0
c37	36	6	1027	0
c38	37	6	1027	0
c39	38	6	1027	0
c40	39	6	1027	0
c41	40	6	1027	0
c42	41	6	1027	0
c43	42	6	1027	0
c44	43	6	1027	0
c45	44	6	1027	0
c46	45	6	1027	0
c47	46	6	1027	0
c48	47	6	1027	0
c49	48	6	1027	0
c50	49	6	1027	0
c51	50	6	1027	0
c52	51	6	1027	0
c53	52	6	1027	0
c54	53	6	1027	0
c55	54	6	1027	0
c56	55	6	1027	0
c57	56	6	1027	0
c58	57	6	1027	0
c59	58	6	1027	0
c60	59	6	1027	0
c61	60	6	1027	0
c62	61	6	1027	0
c63	62	6	1027	0
c64	63	6	1027	0
c65	64	6	1027	0
c66	65	6	1027	0
c67	66	6	1027	0
c68	67	6	1027	0
c69	68	6	1027	0
c70	69	6	1027	0
c71	70	6	1027	0
c72	71	6	1027	0
c73	72	6	1027	0
c74	73	6	1027	0
c75	74	6	1027	0
c76	75	6	1027	0
c77	76	6	1027	0
c78	77	6	1027	0
c79	78	6	1027	0
c80	79	6	1027	0
c81	80	6	1027	0
c82	81	6	1027	0
c83	82	6	1027	0
c84	83	6	1027	0
c85	84	6	1027	0
c86	85	6	1027	0
c87	86	6	1027	0
c88	87	6	1027	0
c89	88	6	1027	0
c90	89	6	1027	0
c91	90	6	1027	0
c92	91	6	1027	0
c93	92	6	1027	0
c94	93	6	1027	0
c95	94	6	1027	0
c96	95	6	1027	0
c97	96	6	1027	0
c98	97	6	1027	0
c99	98	6	1027	0
c100	99	6	1027	0
c101	100	6	1027	0
c102	101	6	1027	0
c103	102	6	1027	0
c104	103	6	1027	0
c105	104	6	1027	0
c106	105	6	1027	0
c107	106	6	1027	0
c108	107	6	1027	0
c109	108	6	1027	0
c110	109	6	1027	0
c111	110	6	1027	0
c112	111	6	1027	0
c113	112	6	1027	0
c114	113	6	1027	0
c115	114	6	1027	0
c116	115	6	1027	0
c117	116	6	1027	0
c118	117	6	1027	0
c119	118	6	1027	0
c120	119	6	1027	0
c121	120	6	1027	0
c122	121	6	1027	0
c123	122	6	1027	0
c124	123	6	1027	0
c125	124	6	1027	0
c126	125	6	1027	0
c127	126	6	1027	0
c128	127	6	1027	0
c129	128	6	1027	0
c130	129	6	1027	0
c131	130	6	1027	0
c132	131	6	1027	0
c133	132	6	1027	0
c134	133	6	1027	0
c135	134	6	1027	0
c136	135	6	1027	0
c137	136	6	1027	0
c138	137	6	1027	0
c139	138	6	1027	0
c140	139	6	1027	0
c141	140	6	1027	0
c142	141	6	1027	0
c143	142	6	1027	0
c144	143	6	1027	0
c145	144	6	1027	0
c146	145	6	1027	0
c147	146	6	1027	0
c148	147	6	1027	0
c149	148	6	1027	0
c150	149	6	1027	0
c151	150	6	1027	0
c152	151	6	1027	0
c153	152	6	1027	0
c154	153	6	1027	0
c155	154	6	1027	0
c156	155	6	1027	0
c157	156	6	1027	0
c158	157	6	1027	0
c159	158	6	1027	0
c160	159	6	1027	0
c161	160	6	1027	0
c162	161	6	1027	0
c163	162	6	1027	0
c164	163	6	1027	0
c165	164	6	1027	0
c166	165	6	1027	0
c167	166	6	1027	0
c168	167	6	1027	0
c169	168	6	1027	0
c170	169	6	1027	0
c171	170	6	1027	0
c172	171	6	1027	0
c173	172	6	1027	0
c174	173	6	1027	0
c175	174	6	1027	0
c176	175	6	1027	0
c177	176	6	1027	0
c178	177	6	1027	0
c179	178	6	1027	0
c180	179	6	1027	0
c181	180	6	1027	0
c182	181	6	1027	0
c183	182	6	1027	0
c184	183	6	1027	0
c185	184	6	1027	0
c186	185	6	1027	0
c187	186	6	1027	0
c188	187	6	1027	0
c189	188	6	1027	0
c190	189	6	1027	0
c191	190	6	1027	0
c192	191	6	1027	0
c193	192	6	1027	0
c194	193	6	1027	0
c195	194	6	1027	0
c196	195	6	1027	0
c197	196	6	1027	0
c198	197	6	1027	0
c199	198	6	1027	0
c200	199	6	1027	0
c201	200	6	1027	0
c202	201	6	1027	0
c203	202	6	1027	0
c204	203	6	1027	0
c205	204	6	1027	0
c206	205	6	1027	0
c207	206	6	1027	0
c208	207	6	1027	0
c209	208	6	1027	0
c210	209	6	1027	0
c211	210	6	1027	0
c212	211	6	1027	0
c213	212	6	1027	0
c214	213	6	1027	0
c215	214	6	1027	0
c216	215	6	1027	0
c217	216	6	1027	0
c218	217	6	1027	0
c219	218	6	1027	0
c220	219	6	1027	0
c221	220	6	1027	0
c222	221	6	1027	0
c223	222	6	1027	0
c224	223	6	1027	0
c225	224	6	1027	0
c226	225	6	1027	0
c227	226	6	1027	0
c228	227	6	1027	0
c229	228	6	1027	0
c230	229	6	1027	0
c231	230	6	1027	0
c232	231	6	1027	0
c233	232	6	1027	0
c234	233	6	1027	0
c235	234	6	1027	0
c236	235	6	1027	0
c237	236	6	1027	0
c238	237	6	1027	0
c239	238	6	1027	0
c240	239	6	1027	0
c241	240	6	1027	0
c242	241	6	1027	0
c243	242	6	1027	0
c244	243	6	1027	0
c245	244	6	1027	0
c246	245	6	1027	0
c247	246	6	1027	0
c248	247	6	1027	0
c249	248	6	1027	0
c250	249	6	1027	0
c251	250	6	1027	0
c252	251	6	1027	0
c253	252	6	1027	0
c254	253	6	1027	0
c255	254	6	1027	0
c256	255	6	1027	0
c257	256	6	1027	0
CHECK TABLE t1 EXTENDED;
Table	Op	Msg_type	Msg_text
test.t1	check	status	OK
DROP TABLE t1;
CREATE TABLE t1 (c1 int);
INSERT INTO t1(c1) VALUES(1);
SELECT * FROM t1;
c1
1
CHECK TABLE t1 EXTENDED;
Table	Op	Msg_type	Msg_text
test.t1	check	status	OK
# INSTANT ADD COLUMNS to table to make it reach the maximum versions
CHECK TABLE t1 EXTENDED;
Table	Op	Msg_type	Msg_text
test.t1	check	status	OK
# An INSTANT DROP COLUMN should result in error now.
ALTER TABLE t1 DROP COLUMN c256, ALGORITHM=INSTANT;
ERROR HY000: Maximum row versions reached for table test/t1. No more columns can be added or dropped instantly. Please use COPY/INPLACE.
INSERT INTO t1(c1) VALUES(2);
SELECT * FROM t1;
c1	c2	c3	c4	c5	c6	c7	c8	c9	c10	c11	c12	c13	c14	c15	c16	c17	c18	c19	c20	c21	c22	c23	c24	c25	c26	c27	c28	c29	c30	c31	c32	c33	c34	c35	c36	c37	c38	c39	c40	c41	c42	c43	c44	c45	c46	c47	c48	c49	c50	c51	c52	c53	c54	c55	c56	c57	c58	c59	c60	c61	c62	c63	c64	c65	c66	c67	c68	c69	c70	c71	c72	c73	c74	c75	c76	c77	c78	c79	c80	c81	c82	c83	c84	c85	c86	c87	c88	c89	c90	c91	c92	c93	c94	c95	c96	c97	c98	c99	c100	c101	c102	c103	c104	c105	c106	c107	c108	c109	c110	c111	c112	c113	c114	c115	c116	c117	c118	c119	c120	c121	c122	c123	c124	c125	c126	c127	c128	c129	c130	c131	c132	c133	c134	c135	c136	c137	c138	c139	c140	c141	c142	c143	c144	c145	c146	c147	c148	c149	c150	c151	c152	c153	c154	c155	c156	c157	c158	c159	c160	c161	c162	c163	c164	c165	c166	c167	c168	c169	c170	c171	c172	c173	c174	c175	c176	c177	c178	c179	c180	c181	c182	c183	c184	c185	c186	c187	c188	c189	c190	c191	c192	c193	c194	c195	c196	c197	c198	c199	c200	c201	c202	c203	c204	c205	c206	c207	c208	c209	c210	c211	c212	c213	c214	c215	c216	c217	c218	c219	c220	c221	c222	c223	c224	c225	c226	c227	c228	c229	c230	c231	c232	c233	c234	c235	c236	c237	c238	c239	c240	c241	c242	c243	c244	c245	c246	c247	c248	c249	c250	c251	c252	c253	c254	c255	c256
1	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
2	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
# DROP COLUMN shall fall back to INPLACE if ALGORITHM not given explicitly
ALTER TABLE t1 DROP COLUMN c256;
INSERT INTO t1(c1) VALUES(3);
SELECT * FROM t1;
c1	c2	c3	c4	c5	c6	c7	c8	c9	c10	c11	c12	c13	c14	c15	c16	c17	c18	c19	c20	c21	c22	c23	c24	c25	c26	c27	c28	c29	c30	c31	c32	c33	c34	c35	c36	c37	c38	c39	c40	c41	c42	c43	c44	c45	c46	c47	c48	c49	c50	c51	c52	c53	c54	c55	c56	c57	c58	c59	c60	c61	c62	c63	c64	c65	c66	c67	c68	c69	c70	c71	c72	c73	c74	c75	c76	c77	c78	c79	c80	c81	c82	c83	c84	c85	c86	c87	c88	c89	c90	c91	c92	c93	c94	c95	c96	c97	c98	c99	c100	c101	c102	c103	c104	c105	c106	c107	c108	c109	c110	c111	c112	c113	c114	c115	c116	c117	c118	c119	c120	c121	c122	c123	c124	c125	c126	c127	c128	c129	c130	c131	c132	c133	c134	c135	c136	c137	c138	c139	c140	c141	c142	c143	c144	c145	c146	c147	c148	c149	c150	c151	c152	c153	c154	c155	c156	c157	c158	c159	c160	c161	c162	c163	c164	c165	c166	c167	c168	c169	c170	c171	c172	c173	c174	c175	c176	c177	c178	c179	c180	c181	c182	c183	c184	c185	c186	c187	c188	c189	c190	c191	c192	c193	c194	c195	c196	c197	c198	c199	c200	c201	c202	c203	c204	c205	c206	c207	c208	c209	c210	c211	c212	c213	c214	c215	c216	c217	c218	c219	c220	c221	c222	c223	c224	c225	c226	c227	c228	c229	c230	c231	c232	c233	c234	c235	c236	c237	c238	c239	c240	c241	c242	c243	c244	c245	c246	c247	c248	c249	c250	c251	c252	c253	c254	c255
1	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
2	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
3	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
# Table would have been rebuilt
# Metadata from INFORMATION_SCHEMA.TABLES
NAME	N_COLS	INSTANT_COLS	TOTAL_ROW_VERSIONS
test/t1	258	0	0
# Metadata from INFORMATION_SCHEMA.COLUMNS
NAME	POS	MTYPE	PRTYPE	HAS_DEFAULT
c1	0	6	1027	0
c2	1	6	1027	0
c3	2	6	1027	0
c4	3	6	1027	0
c5	4	6	1027	0
c6	5	6	1027	0
c7	6	6	1027	0
c8	7	6	1027	0
c9	8	6	1027	0
c10	9	6	1027	0
c11	10	6	1027	0
c12	11	6	1027	0
c13	12	6	1027	0
c14	13	6	1027	0
c15	14	6	1027	0
c16	15	6	1027	0
c17	16	6	1027	0
c18	17	6	1027	0
c19	18	6	1027	0
c20	19	6	1027	0
c21	20	6	1027	0
c22	21	6	1027	0
c23	22	6	1027	0
c24	23	6	1027	0
c25	24	6	1027	0
c26	25	6	1027	0
c27	26	6	1027	0
c28	27	6	1027	0
c29	28	6	1027	0
c30	29	6	1027	0
c31	30	6	1027	0
c32	31	6	1027	0
c33	32	6	1027	0
c34	33	6	1027	0
c35	34	6	1027	0
c36	35	6	1027	0
c37	36	6	1027	0
c38	37	6	1027	0
c39	38	6	1027	0
c40	39	6	1027	0
c41	40	6	1027	0
c42	41	6	1027	0
c43	42	6	1027	0
c44	43	6	1027	0
c45	44	6	1027	0
c46	45	6	1027	0
c47	46	6	1027	0
c48	47	6	1027	0
c49	48	6	1027	0
c50	49	6	1027	0
c51	50	6	1027	0
c52	51	6	1027	0
c53	52	6	1027	0
c54	53	6	1027	0
c55	54	6	1027	0
c56	55	6	1027	0
c57	56	6	1027	0
c58	57	6	1027	0
c59	58	6	1027	0
c60	59	6	1027	0
c61	60	6	1027	0
c62	61	6	1027	0
c63	62	6	1027	0
c64	63	6	1027	0
c65	64	6	1027	0
c66	65	6	1027	0
c67	66	6	1027	0
c68	67	6	1027	0
c69	68	6	1027	0
c70	69	6	1027	0
c71	70	6	1027	0
c72	71	6	1027	0
c73	72	6	1027	0
c74	73	6	1027	0
c75	74	6	1027	0
c76	75	6	1027	0
c77	76	6	1027	0
c78	77	6	1027	0
c79	78	6	1027	0
c80	79	6	1027	0
c81	80	6	1027	0
c82	81	6	1027	0
c83	82	6	1027	0
c84	83	6	1027	0
c85	84	6	1027	0
c86	85	6	1027	0
c87	86	6	1027	0
c88	87	6	1027	0
c89	88	6	1027	0
c90	89	6	1027	0
c91	90	6	1027	0
c92	91	6	1027	0
c93	92	6	1027	0
c94	93	6	1027	0
c95	94	6	1027	0
c96	95	6	1027	0
c97	96	6	1027	0
c98	97	6	1027	0
c99	98	6	1027	0
c100	99	6	1027	0
c101	100	6	1027	0
c102	101	6	1027	0
c103	102	6	1027	0
c104	103	6	1027	0
c105	104	6	1027	0
c106	105	6	1027	0
c107	106	6	1027	0
c108	107	6	1027	0
c109	108	6	1027	0
c110	109	6	1027	0
c111	110	6	1027	0
c112	111	6	1027	0
c113	112	6	1027	0
c114	113	6	1027	0
c115	114	6	1027	0
c116	115	6	1027	0
c117	116	6	1027	0
c118	117	6	1027	0
c119	118	6	1027	0
c120	119	6	1027	0
c121	120	6	1027	0
c122	121	6	1027	0
c123	122	6	1027	0
c124	123	6	1027	0
c125	124	6	1027	0
c126	125	6	1027	0
c127	126	6	1027	0
c128	127	6	1027	0
c129	128	6	1027	0
c130	129	6	1027	0
c131	130	6	1027	0
c132	131	6	1027	0
c133	132	6	1027	0
c134	133	6	1027	0
c135	134	6	1027	0
c136	135	6	1027	0
c137	136	6	1027	0
c138	137	6	1027	0
c139	138	6	1027	0
c140	139	6	1027	0
c141	140	6	1027	0
c142	141	6	1027	0
c143	142	6	1027	0
c144	143	6	1027	0
c145	144	6	1027	0
c146	145	6	1027	0
c147	146	6	1027	0
c148	147	6	1027	0
c149	148	6	1027	0
c150	149	6	1027	0
c151	150	6	1027	0
c152	151	6	1027	0
c153	152	6	1027	0
c154	153	6	1027	0
c155	154	6	1027	0
c156	155	6	1027	0
c157	156	6	1027	0
c158	157	6	1027	0
c159	158	6	1027	0
c160	159	6	1027	0
c161	160	6	1027	0
c162	161	6	1027	0
c163	162	6	1027	0
c164	163	6	1027	0
c165	164	6	1027	0
c166	165	6	1027	0
c167	166	6	1027	0
c168	167	6	1027	0
c169	168	6	1027	0
c170	169	6	1027	0
c171	170	6	1027	0
c172	171	6	1027	0
c173	172	6	1027	0
c174	173	6	1027	0
c175	174	6	1027	0
c176	175	6	1027	0
c177	176	6	1027	0
c178	177	6	1027	0
c179	178	6	1027	0
c180	179	6	1027	0
c181	180	6	1027	0
c182	181	6	1027	0
c183	182	6	1027	0
c184	183	6	1027	0
c185	184	6	1027	0
c186	185	6	1027	0
c187	186	6	1027	0
c188	187	6	1027	0
c189	188	6	1027	0
c190	189	6	1027	0
c191	190	6	1027	0
c192	191	6	1027	0
c193	192	6	1027	0
c194	193	6	1027	0
c195	194	6	1027	0
c196	195	6	1027	0
c197	196	6	1027	0
c198	197	6	1027	0
c199	198	6	1027	0
c200	199	6	1027	0
c201	200	6	1027	0
c202	201	6	1027	0
c203	202	6	1027	0
c204	203	6	1027	0
c205	204	6	1027	0
c206	205	6	1027	0
c207	206	6	1027	0
c208	207	6	1027	0
c209	208	6	1027	0
c210	209	6	1027	0
c211	210	6	1027	0
c212	211	6	1027	0
c213	212	6	1027	0
c214	213	6	1027	0
c215	214	6	1027	0
c216	215	6	1027	0
c217	216	6	1027	0
c218	217	6	1027	0
c219	218	6	1027	0
c220	219	6	1027	0
c221	220	6	1027	0
c222	221	6	1027	0
c223	222	6	1027	0
c224	223	6	1027	0
c225	224	6	1027	0
c226	225	6	1027	0
c227	226	6	1027	0
c228	227	6	1027	0
c229	228	6	1027	0
c230	229	6	1027	0
c231	230	6	1027	0
c232	231	6	1027	0
c233	232	6	1027	0
c234	233	6	1027	0
c235	234	6	1027	0
c236	235	6	1027	0
c237	236	6	1027	0
c238	237	6	1027	0
c239	238	6	1027	0
c240	239	6	1027	0
c241	240	6	1027	0
c242	241	6	1027	0
c243	242	6	1027	0
c244	243	6	1027	0
c245	244	6	1027	0
c246	245	6	1027	0
c247	246	6	1027	0
c248	247	6	1027	0
c249	248	6	1027	0
c250	249	6	1027	0
c251	250	6	1027	0
c252	251	6	1027	0
c253	252	6	1027	0
c254	253	6	1027	0
c255	254	6	1027	0
CHECK TABLE t1 EXTENDED;
Table	Op	Msg_type	Msg_text
test.t1	check	status	OK
DROP TABLE t1;
